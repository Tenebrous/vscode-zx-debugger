{ 
  "name": "ZEsarUX Disassembly",
  "scopeName": "source.asm.z80",
  "fileTypes": ["zdis"],
  "patterns": [
    {
        "match": "(?i)^BANK.*?$",
        "name": "punctuation.definition.tag.asm",
        "comment": "Memory bank"
    },
    {
        "match": "(?i)^  ([0-9a-f]{4}) ([0-9a-f\\s]{8}) ",
        "captures": {
            "1": { "comment": "Memory address", "name": "punctuation.definition.tag.asm" },
            "2": { "comment": "Opcodes",        "name": "constant.numeric.asm" }
        },
        "comment": "Label"    
    },
    {
        "match": "(?i)\\b(call|jp|jr)\\s+(?:(z|nz|c|nc|po|pe|p|m)\\s*,\\s*)",
        "captures": {
                "1": { "name": "keyword.other.command.asm" },
                "2": { "name": "constant.other.flag.asm" },
                "3": { "name": "entity.name.label.asm" }
            },
        "comment": "Special case: conditional call/jmp"
    },
    {
        "match": "(?i)\\b(djnz)",
        "captures": {
                "1": { "name": "keyword.other.command.asm" },
                "2": { "name": "entity.name.label.asm" }
            },
        "comment": "Special case: djnz"
    },
    {
        "match": "(?i)\\b(ret)(?:\\s+(z|nz|c|nc|po|pe|p|m))",
        "captures": {
                "1": { "name": "keyword.other.command.asm" },
                "2": { "name": "constant.other.flag.asm" }
            },
        "comment": "Special case: conditional ret"
    },
    {
        "match": "(?i)\\b(adc|add|and|bit|call|ccf|cp|cpl|cpd|cpdr|cpi|cpir|daa|dec|di|djnz|ei|ex|exx|halt|im|in|inc|ind|indr|inf|ini|inir|jp|jr|ld|ldd|lddr|ldi|ldir|neg|nop|exx|or|otdr|otir|out|outd|outi|pop|push|res|ret|reti|retn|rl|rla|rlc|rlca|rld|rr|rra|rrc|rrca|rrd|rst|sbc|scf|set|sla|sli|sll|sra|srl|sub|xor)\\b",
        "name": "keyword.other.command.asm",
        "comment": "Z80 commands"
    },
    {
        "match": "(?i)\\b(a|b|c|d|e|h|l|i|r|ixl|ixh|iyl|iyh)\\b",
        "name": "variable.symbol.register.asm",
        "comment": "8 bit register set"
    },
    {
        "match": "(?i)(\\baf')|(\\b(af|bc|de|hl|sp|ix|iy)\\b)",
        "name": "variable.symbol.register.asm",
        "comment": "16 bit register set"
    },
    {
        "match": "(?i)([0-9a-f].*?)",
        "name": "constant.numeric.asm",
        "comment": "HEX/DEC/BIN number"
    },
    {
        "match": ";.*$",
        "name": "comment.line.asm",
        "comment": "Comment line"
    }
  ],
  "uuid": "92735c01-7e14-4a8a-9707-b91ea3b36604"
}